group 'com'
version '1.0-SNAPSHOT'

apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'idea' //run idea to resolve dependancies in intellij

sourceCompatibility = '1.8'
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

project.ext.$jarDir = 'libs'
project.ext.mainClass = 'com.scnd_genesis.loginScreen'
repositories {
    mavenCentral()
}

dependencies {
    compile 'mysql:mysql-connector-java:5.1.36'
    compile 'commons-codec:commons-codec:1.9'
    compile 'commons-lang:commons-lang:2.6'
    runtime 'net.java.jinput:jinput-platform:2.0.6'
    compile group: 'javazoom', name: 'jlayer', version: '1.0.1'
    compile group: 'org.xerial', name: 'sqlite-jdbc', version: '3.7.2'
    compile group: 'net.java.jinput', name: 'jinput', version: '2.0.6'
    testCompile group: 'junit', name: 'junit', version: '4.11'
}

jar {
    manifest {
        attributes (
                "Implementation-Title": "The SCND Genesis: Legacy",
                "Implementation-Version": "1.0",
                "Main-Class": "com.scndgen.legacy.ScndGen",
                "Class-Path": configurations.compile.collect { "libs/$it.name"}.join(' '),
        )
    }
}

task copyToLib(type: Copy) {
    into "$buildDir/libs"
    from configurations.runtime
}

build.dependsOn(copyToLib)

task runJava(type: JavaExec, dependsOn:[classes]) {
    //main = 'com.scnd_genesis.loginScreen'
    //classpath = sourceSets.main.runtimeClasspath
}